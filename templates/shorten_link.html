<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Url Shortener - Tanbaycu</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}" />
  <style>
    html,
    body {
      height: 100%;
      margin: 0;
    }

    body {
      display: flex;
      flex-direction: column;
      background-color: #282a36;
      color: #f8f8f2;
      font-family: "Roboto", sans-serif;
      overflow-x: hidden;
    }

    .container {
      margin: 50px auto;
      max-width: 600px;
      border-radius: 15px;
      padding: 20px;
      background-color: #44475a;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6);
      position: relative;
      transition: transform 0.3s, box-shadow 0.3s, background-color 0.3s;
      width: 90%;
      flex: 1;
      /* Chiếm không gian còn lại */
    }

    .container:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.8);
      background-color: #4d5b8e;
    }

    h2 {
      text-align: center;
      font-size: 2.5em;
      margin-bottom: 20px;
      text-shadow: 1px 1px 5px rgba(0, 0, 0, 0.7);
      cursor: pointer;
      transition: color 0.3s ease, transform 0.3s;
    }

    h2:hover {
      color: #50fa7b;
      transform: scale(1.05);
    }

    .btn-custom {
      background-color: #50fa7b;
      color: #282a36;
      border-radius: 10px;
      padding: 12px;
      text-align: center;
      text-decoration: none;
      display: block;
      width: 100%;
      transition: background-color 0.3s, transform 0.3s, box-shadow 0.3s;
      font-size: 1.2em;
      margin-top: 15px;
    }

    .btn-custom:hover {
      background-color: #4bf66f;
      transform: translateY(-3px);
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.5);
    }

    .short-url {
      font-size: 1.5em;
      font-weight: bold;
      margin-top: 20px;
      color: #8be9fd;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
      word-wrap: break-word;
      text-align: center;
    }

    footer {
      margin-top: auto;
      /* Đẩy footer xuống dưới cùng */
      padding: 20px 0;
      /* Padding trên và dưới */
      font-size: 1rem;
      /* Kích thước chữ */
      display: flex;
      /* Sử dụng flexbox */
      justify-content: center;
      /* Căn giữa nội dung trong footer */
      align-items: center;
      /* Căn giữa theo chiều dọc */
      background-color: transparent;
      /* Nền trong suốt, không cần phông nền */
      color: #ffffff;
      /* Màu chữ sáng */
    }

    footer a {
      color: #50fa7b;
      /* Màu chữ liên kết trong footer */
      text-decoration: none;
      /* Không gạch chân */
      transition: color 0.3s;
      /* Hiệu ứng chuyển màu */
      margin: 0 10px;
      /* Khoảng cách giữa các liên kết */
    }

    footer a:hover {
      color: #ffffff;
      /* Màu chữ khi hover */
    }

    footer span {
      margin: 0 10px;
      /* Khoảng cách giữa các phần tử */
    }


    .home-button-container {
      text-align: center;
      margin-top: 30px;
    }

    .home-link {
      display: inline-block;
      background-color: transparent;
      /* Không có màu nền */
      color: #50fa7b;
      /* Màu chữ */
      padding: 10px 20px;
      /* Khoảng đệm */
      border-radius: 10px;
      /* Bo góc */
      font-size: 1.2em;
      /* Kích thước chữ */
      text-decoration: none;
      /* Bỏ gạch chân */
      transition: color 0.3s, transform 0.3s;
      /* Hiệu ứng chuyển đổi */
    }

    .home-link:hover {
      color: #4bf66f;
      /* Màu chữ khi hover */
      transform: scale(1.05);
      /* Phóng to nhẹ */
    }

    @media (max-width: 1024px) {
      .container {
        max-width: 95%;
        padding: 20px;
        margin-top: 20px;
      }

      h2 {
        font-size: 2em;
      }

      .short-url {
        font-size: 1.3em;
      }
    }

    @media (max-width: 768px) {
      h2 {
        font-size: 1.8em;
      }
    }

    @media (max-width: 576px) {
      .container {
        padding: 15px;
      }

      h2 {
        font-size: 1.5em;
      }

      .btn-custom {
        font-size: 1em;
      }
    }

    @media (min-width: 768px) {
      .container {
        margin-top: 80px;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <h2 id="title">Rút gọn URL</h2>
    <form id="urlForm" method="POST" onsubmit="return validateForm()">
      <div class="mb-3">
        <label for="long_url" class="form-label">Nhập URL dài của bạn:</label>
        <input type="url" class="form-control" id="long_url" name="long_url" placeholder="Ví dụ: https://example.com"
          required />
      </div>
      <button type="submit" class="btn btn-custom w-100">Rút gọn</button>
    </form>

    {% if short_url %}
    <div class="short-url text-center mt-4">
      <h4>URL rút gọn của bạn:</h4>
      <a href="{{ short_url }}" target="_blank" style="color: #50fa7b; font-weight: bold">{{ short_url }}</a>
      <h4 class="mt-3">QR Code của bạn:</h4>
      <img src="https://api.stakdek.de/api/qr/gen?data={{ short_url }}" alt="QR Code"
        style="width: 200px; height: 200px; margin-top: 20px" />
    </div>
    <div class="home-button-container">
      <a href="{{ url_for('homepage') }}" class="home-link"> Về trang chủ </a>
    </div>
    {% endif %} {% with messages = get_flashed_messages() %} {% if messages %}
    <div class="alert alert-danger mt-3" role="alert">{{ messages[0] }}</div>
    {% endif %} {% endwith %}
  </div>

  <footer>
    <p>
      <span>© 2024</span> | 
      <span>Url Shortener</span> | 
      <a href="{{ url_for('homepage') }}">Trang chủ</a>
    </p>
  </footer>
  

  <script>
    document.getElementById("title").onclick = function () {
      document.getElementById("urlForm").reset();
      const shortUrlDiv = document.querySelector(".short-url");
      if (shortUrlDiv) {
        shortUrlDiv.innerHTML = "";
      }
    };

    function validateForm() {
      const longUrlInput = document.getElementById("long_url").value;
      if (!longUrlInput) {
        alert("Vui lòng nhập URL dài!");
        return false;
      }
      return true;
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>