<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fact or Joke - Tanbaycu</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}" />
  <style>
    body {
      background-color: #282a36;
      /* Màu nền tối */
      color: #f8f8f2;
      /* Màu chữ sáng */
      font-family: "Arial", sans-serif;
      /* Chọn font chữ */
      padding: 20px;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      /* Chiều cao tối thiểu bằng 100% chiều cao của viewport */
    }

    .container {
      flex: 1;
      /* Chiếm không gian còn lại */
      margin-top: 50px;
      border-radius: 10px;
      /* Bo tròn góc */
      padding: 30px;
      background-color: #44475a;
      /* Màu nền của container */
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
      /* Đổ bóng cho container */
    }

    h1 {
      text-align: center;
      /* Canh giữa tiêu đề */
      color: #50fa7b;
      /* Màu sắc tiêu đề */
      cursor: pointer;
      /* Con trỏ khi hover */
    }

    .form-label {
      font-weight: bold;
      /* Làm đậm văn bản nhãn */
    }

    .form-control,
    .form-select {
      background-color: #6272a4;
      /* Màu nền của input và select */
      border: 1px solid #50fa7b;
      /* Viền màu xanh */
      color: #f8f8f2;
      /* Màu chữ cho input */
    }

    .form-control:focus,
    .form-select:focus {
      background-color: #44475a;
      /* Màu nền khi focus */
      border-color: #50fa7b;
      /* Viền màu khi focus */
      box-shadow: 0 0 5px rgba(80, 250, 123, 0.5);
      /* Đổ bóng khi focus */
    }

    .btn-custom {
      background-color: #50fa7b;
      /* Màu nền nút */
      color: #282a36;
      /* Màu chữ nút */
      border-radius: 5px;
      /* Bo tròn nút */
      padding: 10px 20px;
      /* Padding cho nút */
      transition: background-color 0.3s, transform 0.2s;
      /* Hiệu ứng chuyển đổi */
    }

    .btn-custom:hover {
      background-color: #4bf66f;
      /* Màu nền khi hover */
      transform: translateY(-2px);
      /* Hiệu ứng nhấc lên khi hover */
    }

    .response {
      margin-top: 20px;
      /* Khoảng cách trên */
      background-color: #6272a4;
      /* Màu nền của phần phản hồi */
      padding: 15px;
      /* Padding cho phần phản hồi */
      border-radius: 5px;
      /* Bo tròn phần phản hồi */
      color: #f8f8f2;
      /* Màu chữ của phần phản hồi */
      display: none;
      /* Ẩn phần phản hồi mặc định */
    }

    .response strong {
      color: #50fa7b;
      /* Màu chữ đậm trong phần phản hồi */
    }

    .toggle-section {
      display: none;
      /* Ẩn phần dịch văn bản mặc định */
      margin-top: 20px;
      /* Khoảng cách trên */
    }

    .spinner-border {
      width: 3rem;
      height: 3rem;
      border-width: 0.25em;
    }

    /* Footer Styles */
    footer {
      color: #f8f8f2;
      /* Màu chữ trong footer */
      text-align: center;
      /* Canh giữa chữ trong footer */
      padding: 15px 0;
      /* Padding cho footer */
      margin-top: auto;
      /* Đẩy footer xuống cuối */
    }
  </style>
</head>

<body>
  <div class="container">
    <h1 onclick="location.href='{{ url_for('homepage') }}'">
      Nhận Thông Tin Thú Vị
    </h1>

    <label for="factType" class="form-label">Chọn loại thông tin:</label>
    <select id="factType" class="form-select mb-3">
      <option value="numbers">Numbers Fact</option>
      <option value="cat">Cat Fact</option>
      <option value="joke">Joke</option>
      <option value="useless">Useless Fact</option>
    </select>

    <div id="numbersSection">
      <label for="number" class="form-label">Số:</label>
      <input type="text" id="number" placeholder="Nhập số hoặc 'random'" class="form-control mb-3" />

      <label for="type" class="form-label">Loại:</label>
      <select id="type" class="form-select mb-3">
        <option value="trivia">Trivia</option>
        <option value="math">Math</option>
        <option value="date">Date</option>
        <option value="year">Year</option>
      </select>

      <button id="getFact" class="btn btn-custom">Nhận Fact</button>
      <div class="response" id="fact"></div>
      <div class="response" id="translatedFact"></div>
    </div>

    <div id="catSection" style="display: none">
      <button id="getCatFact" class="btn btn-custom">Nhận Cat Fact</button>
      <div class="response" id="catFact"></div>
      <div class="response" id="translatedCatFact"></div>
    </div>

    <div id="uselessFactSection" style="display: none">
      <button id="getUselessFact" class="btn btn-custom">
        Nhận Useless Fact
      </button>
      <div id="uselessFact" class="response" style="display: none"></div>
      <div id="translatedUselessFact" class="response" style="display: none"></div>
    </div>

    <div id="jokeSection" style="display: none">
      <label for="jokeCategory" class="form-label">Chọn loại joke:</label>
      <select id="jokeCategory" class="form-select mb-3">
        <option value="Programming">Programming</option>
        <option value="Miscellaneous">Miscellaneous</option>
        <option value="Dark">Dark</option>
        <option value="Spooky">Spooky</option>
      </select>
      <button id="getJoke" class="btn btn-custom">Nhận Joke</button>
      <div class="response" id="joke"></div>
      <div class="response" id="translatedJoke"></div>
    </div>
    <div id="loading" style="display: none; text-align: center">
      <div class="spinner-border" role="status">
        <span class="visually-hidden">Đang tải...</span>
      </div>
    </div>
  </div>

  <footer>
    <p>&copy; 2024 | Facts</p>
  </footer>

  <script>
    document
      .getElementById("factType")
      .addEventListener("change", function () {
        const selectedValue = this.value;
        const numbersSection = document.getElementById("numbersSection");
        const catSection = document.getElementById("catSection");
        const jokeSection = document.getElementById("jokeSection");
        const uselessFactSection =
          document.getElementById("uselessFactSection");

        if (selectedValue === "numbers") {
          numbersSection.style.display = "block";
          catSection.style.display = "none"; // Ẩn phần cat fact
          jokeSection.style.display = "none"; // Ẩn phần joke
          uselessFactSection.style.display = "none"; // Ẩn phần useless fact
          numbersSection.querySelector("input").value = ""; // Xóa giá trị trong input
          document.getElementById("fact").innerHTML = ""; // Xóa phần phản hồi
          document.getElementById("translatedFact").innerHTML = ""; // Xóa phần dịch
        } else if (selectedValue === "cat") {
          numbersSection.style.display = "none"; // Ẩn phần numbers fact
          catSection.style.display = "block"; // Hiện phần cat fact
          jokeSection.style.display = "none"; // Ẩn phần joke
          uselessFactSection.style.display = "none"; // Ẩn phần useless fact
          document.getElementById("catFact").innerHTML = ""; // Xóa phần phản hồi
          document.getElementById("translatedCatFact").innerHTML = ""; // Xóa phần dịch
        } else if (selectedValue === "joke") {
          numbersSection.style.display = "none"; // Ẩn phần numbers fact
          catSection.style.display = "none"; // Ẩn phần cat fact
          jokeSection.style.display = "block"; // Hiện phần joke
          uselessFactSection.style.display = "none"; // Ẩn phần useless fact
          document.getElementById("joke").innerHTML = ""; // Xóa phần phản hồi
          document.getElementById("translatedJoke").innerHTML = ""; // Xóa phần dịch
        } else if (selectedValue === "useless") {
          numbersSection.style.display = "none"; // Ẩn phần numbers fact
          catSection.style.display = "none"; // Ẩn phần cat fact
          jokeSection.style.display = "none"; // Ẩn phần joke
          uselessFactSection.style.display = "block"; // Hiện phần useless fact
          document.getElementById("uselessFact").innerHTML = ""; // Xóa phần phản hồi
          document.getElementById("translatedUselessFact").innerHTML = ""; // Xóa phần dịch
        }
      });

    // Xử lý lấy Fact
    document
      .getElementById("getFact")
      .addEventListener("click", async function () {
        const number = document.getElementById("number").value;
        const type = document.getElementById("type").value;
        const loadingIndicator = document.getElementById("loading");

        loadingIndicator.style.display = "block"; // Hiện spinner

        try {
          const response = await fetch(`/get-fact/${type}/${number}`);
          const data = await response.json();
          loadingIndicator.style.display = "none"; // Ẩn spinner

          document.getElementById(
            "fact"
          ).innerHTML = `<strong>Fact:</strong> ${data.original_fact}`;
          document.getElementById(
            "translatedFact"
          ).innerHTML = `<strong>Dịch:</strong> ${data.translated_fact}`;
          document.getElementById("fact").style.display = "block";
          document.getElementById("translatedFact").style.display = "block";
        } catch (error) {
          loadingIndicator.style.display = "none"; // Ẩn spinner nếu có lỗi
          document.getElementById(
            "fact"
          ).innerHTML = `<strong>Lỗi:</strong> ${error.message}`;
          document.getElementById("fact").style.display = "block";
        }
      });

    // Xử lý lấy Cat Fact
    document
      .getElementById("getCatFact")
      .addEventListener("click", async function () {
        const loadingIndicator = document.getElementById("loading");

        loadingIndicator.style.display = "block"; // Hiện spinner

        try {
          const response = await fetch("/get-cat-fact");
          const data = await response.json();
          loadingIndicator.style.display = "none"; // Ẩn spinner

          document.getElementById(
            "catFact"
          ).innerHTML = `<strong>Cat Fact:</strong> ${data.cat_fact}`;
          document.getElementById(
            "translatedCatFact"
          ).innerHTML = `<strong>Dịch:</strong> ${data.translated_cat_fact}`;
          document.getElementById("catFact").style.display = "block";
          document.getElementById("translatedCatFact").style.display =
            "block";
        } catch (error) {
          loadingIndicator.style.display = "none"; // Ẩn spinner nếu có lỗi
          document.getElementById(
            "catFact"
          ).innerHTML = `<strong>Lỗi:</strong> ${error.message}`;
          document.getElementById("catFact").style.display = "block";
        }
      });

    // Xử lý lấy Joke
    document
      .getElementById("getJoke")
      .addEventListener("click", async function () {
        const category = document.getElementById("jokeCategory").value;
        const loadingIndicator = document.getElementById("loading");

        loadingIndicator.style.display = "block"; // Hiện spinner

        try {
          const response = await fetch(`/get-joke/${category}`);
          const data = await response.json();
          loadingIndicator.style.display = "none"; // Ẩn spinner

          document.getElementById(
            "joke"
          ).innerHTML = `<strong>Joke:</strong> ${data.joke}`;
          document.getElementById(
            "translatedJoke"
          ).innerHTML = `<strong>Dịch:</strong> ${data.translated_joke}`;
          document.getElementById("joke").style.display = "block";
          document.getElementById("translatedJoke").style.display = "block";
        } catch (error) {
          loadingIndicator.style.display = "none"; // Ẩn spinner nếu có lỗi
          document.getElementById(
            "joke"
          ).innerHTML = `<strong>Lỗi:</strong> ${error.message}`;
          document.getElementById("joke").style.display = "block";
        }
      });
    // Xử lý lấy Useless Fact
    document
      .getElementById("getUselessFact")
      .addEventListener("click", async function () {
        const loadingIndicator = document.getElementById("loading");

        loadingIndicator.style.display = "block"; // Hiện spinner

        try {
          const response = await fetch("/get-useless-fact");
          const data = await response.json();
          loadingIndicator.style.display = "none"; // Ẩn spinner

          document.getElementById(
            "uselessFact"
          ).innerHTML = `<strong>Useless Fact:</strong> ${data.useless_fact}`;
          document.getElementById(
            "translatedUselessFact"
          ).innerHTML = `<strong>Dịch:</strong> ${data.translated_useless_fact}`;
          document.getElementById("uselessFact").style.display = "block";
          document.getElementById("translatedUselessFact").style.display =
            "block";
        } catch (error) {
          loadingIndicator.style.display = "none"; // Ẩn spinner nếu có lỗi
          document.getElementById(
            "uselessFact"
          ).innerHTML = `<strong>Lỗi:</strong> ${error.message}`;
          document.getElementById("uselessFact").style.display = "block";
        }
      });

    // Xử lý dịch văn bản
    document
      .getElementById("toggleTranslate")
      .addEventListener("click", function () {
        const translateSection = document.getElementById("translateSection");
        translateSection.style.display =
          translateSection.style.display === "none" ? "block" : "none";
      });

    document
      .getElementById("translate")
      .addEventListener("click", async function () {
        const textToTranslate =
          document.getElementById("textToTranslate").value;
        const loadingIndicator = document.getElementById("loading");

        loadingIndicator.style.display = "block"; // Hiện spinner

        try {
          const response = await fetch("/translate", {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify({ text: textToTranslate })
          });
          const data = await response.json();
          loadingIndicator.style.display = "none"; // Ẩn spinner

          document.getElementById(
            "translatedText"
          ).innerHTML = `<strong>Dịch:</strong> ${data.translated_text}`;
          document.getElementById("translatedText").style.display = "block";
        } catch (error) {
          loadingIndicator.style.display = "none"; // Ẩn spinner nếu có lỗi
          document.getElementById(
            "translatedText"
          ).innerHTML = `<strong>Lỗi:</strong> ${error.message}`;
          document.getElementById("translatedText").style.display = "block";
        }
      });
  </script>
</body>

</html>